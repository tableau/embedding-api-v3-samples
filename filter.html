<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Filter</title>

    <script type="module">
        import { FilterUpdateType, TableauEventType } from "https://devplat.tableautest.com/javascripts/api/tableau.embedding.3.4.0.js";

        async function yearFilter(year) {
            let viz = document.getElementById("tableauViz");
            let sheet = viz.workbook.activeSheet;

            if (year) {
                await sheet.applyFilterAsync("Academic Year", [year], FilterUpdateType.Replace);
            } else {
                await sheet.clearFilterAsync("Academic Year");
            }
        }

        let dropdown = document.getElementById("changeYear");
        dropdown.addEventListener("change", (e) => yearFilter(e.target.value));
    </script>
</head>

<body>
    <div style="width:800px; height:700px;overflow:auto;">
        <tableau-viz id="tableauViz" src="https://devplat.tableautest.com/views/RegionalSampleWorkbook/College"
            hide-tabs>
            <viz-filter field="Academic Year" value="" />
        </tableau-viz>
    </div>
    <div style="padding:20px;">
        Year: <select id="changeYear">
            <option value="">All</option>
            <option value="2013">2013</option>
            <option value="2014">2014</option>
        </select>
    </div>
</body>

</html>